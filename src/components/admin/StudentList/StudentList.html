<div class="StudentList">
  <div class="Filters">
    <Breadcrumbs :crumbs="breadcrumbs">
    </Breadcrumbs>
    <div class="Filters__wrap">
      <small class="Filters__title">
        Browse by
      </small>
      <div :class="{ 'Filters__option' : true, 'Filters__option--active' : dashboardView === 'business' } " @click="setDashboardView('business')">
        <i class="fal fa-briefcase"></i> Businesses
      </div>
      <div :class="{ 'Filters__option' : true, 'Filters__option--active' : dashboardView === 'course' } " @click="setDashboardView('course')">
        <i class="fal fa-book"></i> Courses
      </div>
    </div>
  </div>

  <div v-show="dashboardView === 'business'">
    <div class="StudentList__group" v-for="business in businesses" v-show="business.students.length">
      <h4>{{ business.name }}</h4>
      <div class="StudentList__wrap">
        <Card v-for="(student, sIndex) in business.students" :title="student.first_name + '' + student.last_name" :key="sIndex">
          <div slot="body">
            <p><small>{{ student.email }}</small></p>
            <div v-for="(course, cIndex) in student.courses">
              <label class="label flat flex flex--spaced">
                <span>{{ course.name }}</span>
              </label>
              <ProgressBar class="flat" :key="cIndex" :completed="sIndex + 4" :total="12"></ProgressBar>
              <p class="StudentList__elapsed"><small class="ghosted">{{ course.CourseStudent.assigned | moment("from", true) }} spent</small></p>
            </div>
          </div>
        </Card>
      </div>
    </div>
  </div>

  <div v-show="dashboardView === 'course'">
    <div class="StudentList__group" v-for="course in courses" v-show="course.students.length">
      <h4>{{ course.name }}</h4>
      <div class="StudentList__wrap">
        <Card v-for="(student, sIndex) in course.students" :title="student.first_name + '' + student.last_name" :key="sIndex">
          <div slot="body">
            <p><small>{{ student.email }}</small></p>
            <div v-for="(course, cIndex) in student.courses">
              <label class="label flat flex flex--spaced">
                <span>{{ course.name }}</span>
              </label>
              <ProgressBar class="flat" :key="cIndex" :completed="sIndex + 4" :total="12"></ProgressBar>
              <p class="StudentList__elapsed"><small class="ghosted">{{ course.CourseStudent.assigned | moment("from", true) }} spent</small></p>
            </div>
          </div>
        </Card>
      </div>
    </div>
  </div>
</div>
