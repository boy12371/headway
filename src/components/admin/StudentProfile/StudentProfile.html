<div class="StudentProfile">
  <div>
    <div class="StudentProfile__header">
      <h1 class="flat">{{ activeStudentProfile.first_name }} {{ activeStudentProfile.last_name }}</h1>
      <p v-show="activeStudentProfile.lastLoggedIn">Logged in {{ activeStudentProfile.lastLoggedIn | moment("from", true) }} ago</p>
      <p v-show="!activeStudentProfile.lastLoggedIn">Has not logged in yet</p>
    </div>
    <h4>Recent activity</h4>
  </div>
  <div>
    <div class="StudentProfile__group">
      <h4>Assigned Courses</h4>
      <div>
        <div v-for="course in activeStudentProfile.courses" class="Card CourseCard">
          <div class="CourseCard__wrap">
            <i class="fa fa-trash CourseCard__action" @click="confirmRemoveCourse(course.id)"></i>
            <router-link :to="{ name: 'course', params: { courseId : course.id }}" class="CourseCard__link">
              <p class="flat"><strong>{{ course.name }}</strong></p>
              <small>Begun <strong>Introduction</strong> 6 days ago</small>
            </router-link>
            <ProgressBar class="CourseCard__progress" collection="units" :complete="course.CourseStudent.completedUnits" :total="11"></ProgressBar>
            <div v-if="course.CourseStudent.timeSpentOnCurrentUnit" hidden> Time spent on current Unit: {{ course.CourseStudent.timeSpentOnCurrentUnit }} </div>
          </div>
        </div>
        <button class="btn btn--small btn--text" @click="toggleModal('addStudentCourse')">
          <i class="fa fa-plus"></i> Assign a course
        </button>
      </div>
    </div>

    <div class="StudentProfile__group">
      <h4>{{ activeStudentProfile.first_name }} works with</h4>
      <router-link v-for="business in activeStudentProfile.businesses" class="Card CourseCard" :to="{ name: 'businessProfile', params: { businessId : business.id }}">
        <div class="CourseCard__wrap CourseCard__wrap--flat">
          <p class="flat"><strong>{{ business.name }}</strong></p>
          <small>Subscribed {{ business.createdAt |  moment("from", true) }} ago</small>
        </div>
        <div class="CourseCard__actions">
          <button @click="removeStudentFromBusiness(business.id)">
            Remove Student from Business
          </button>
        </div>
      </router-link>
      <button class="btn btn--text" @click="toggleModal('student')">
        <i class="fa fa-plus"></i> Invite to business
      </button>
    </div>
  </div>
</div>
